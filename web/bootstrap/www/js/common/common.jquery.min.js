var commonLibrary={url_province:"/address/selectProvinces",url_city:"/address/selectCitys",url_district:"/address/selectDistricts",init:function(){this.bootboxInit()},bootboxInit:function(){bootbox&&(bootbox.addLocale("zh_CN_OK",{OK:"确定",CANCEL:"取消",CONFIRM:"确认"}),bootbox.setLocale("zh_CN_OK"),bootbox.setDefaults({title:"提示信息",animate:!0}))},param:function(t){var e=new RegExp("[?&]"+t+"=([^]*)").exec(window.location.href);return null==e?null:e[1]||0},post:function(t,e,i){$.ajax({type:"POST",url:t,data:JSON.stringify(e),dataType:"JSON",contentType:"application/json;charset=utf-8",success:i})},get:function(t,e,i){$.ajax({url:t,type:"GET",async:"true",data:e,dataType:"JSON",contentType:"application/json;charset=utf-8",success:i})},showAddress:function(t,e){this.selectProvinces(t,e),this.selectCity(t,e),this.selectDistrict(t,e)},selectProvinces:function(t,e){var i=t+" "+e.province.id,n=e.province.value;$.ajax({type:"GET",url:this.url_province,success:function(t){var e=t.result.countryAddress;$(i).empty();n<=0?$(i).append("<option  selected='selected'  value=''>请选择</option>"):$(i).append("<option value=''>请选择</option>");for(var o=0;o<e.length;o++){var a=e[o];n==a.id?$(i).append("<option  selected='selected'  value="+a.id+">"+a.name+"</option>"):$(i).append("<option value="+a.id+">"+a.name+"</option>")}}})},selectCity:function(t,e){var i=t+" "+e.province.id,n=t+" "+e.city.id,o=t+" "+e.district.id,a=e.province.value,s=e.city.value;if(s>0){var c={id:a};$.ajax({type:"POST",url:this.url_city,data:JSON.stringify(c),contentType:"application/json;charset=utf-8",success:function(t){var e=t.result.countryAddress;$(n).empty(),$(n).append("<option value=''>请选择</option>");for(var i=0;i<e.length;i++){var o=e[i];s==o.id?$(n).append("<option selected='selected' value="+o.id+">"+o.name+"</option>"):$(n).append("<option value="+o.id+">"+o.name+"</option>")}}})}else $(n).append("<option selected='selected' value=''>请选择</option>");var r=this;$(i).change(function(){var t={id:""};t.id=$(this).children("option:selected").val(),$.ajax({type:"POST",url:r.url_city,data:JSON.stringify(t),contentType:"application/json;charset=utf-8",success:function(t){var e=t.result.countryAddress;$(n).empty(),$(o).empty();for(var i=0;i<e.length;i++){var a=e[i];$(n).append("<option value="+a.id+">"+a.name+"</option>")}var s={id:""};s.id=$(n).children("option:selected").val(),s.id>0?$.ajax({type:"POST",url:r.url_district,data:JSON.stringify(s),contentType:"application/json;charset=utf-8",success:function(t){var e=t.result.countryAddress;$(o).empty();for(var i=0;i<e.length;i++){var n=e[i];$(o).append("<option value="+n.id+">"+n.name+"</option>")}}}):$(o).html("")}})})},selectDistrict:function(t,e){var i=(e.province.id,t+" "+e.city.id),n=t+" "+e.district.id,o=e.city.value,a=e.district.value;if(o>0){var s={id:o};$.ajax({type:"POST",url:this.url_district,data:JSON.stringify(s),contentType:"application/json;charset=utf-8",success:function(t){var e=t.result.countryAddress;$(n).empty();for(var i=0;i<e.length;i++){var o=e[i];a==o.id?$(n).append("<option selected='selected' value="+o.id+">"+o.name+"</option>"):$(n).append("<option  value="+o.id+">"+o.name+"</option>")}}})}else $(n).append("<option selected='selected' value=''>请选择</option>");var c=this;$(i).change(function(){var t={id:""};t.id=$(this).children("option:selected").val(),t.id>0?$.ajax({type:"POST",url:c.url_district,data:JSON.stringify(t),contentType:"application/json;charset=utf-8",success:function(t){var e=t.result.countryAddress;$(n).empty();for(var i=0;i<e.length;i++){var o=e[i];$(n).append("<option  value="+o.id+">"+o.name+"</option>")}}}):$(n).html("")})}};$(function(){$.extend({common:commonLibrary}),$.common.init()});